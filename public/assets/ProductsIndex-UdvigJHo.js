import{c as I,o as c,a as v,d as B,r as O,s as g,t as b,n as C,e,m as D,b as f,f as i,F as M,g as w,y as j,z as U,l as V,A as z,j as T,B as E,C as L,p as P,D as R,E as F,i as N,w as x,G as q}from"./index-1lfBLovf.js";import{_ as S}from"./AButton-RC2ACXzy.js";import{c as k}from"./createVueComponent-I1wlHjMO.js";var G=k("arrows-vertical","IconArrowsVertical",[["path",{d:"M8 7l4 -4l4 4",key:"svg-0"}],["path",{d:"M8 17l4 4l4 -4",key:"svg-1"}],["path",{d:"M12 3l0 18",key:"svg-2"}]]),H=k("chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]),J=k("chevron-left","IconChevronLeft",[["path",{d:"M15 6l-6 6l6 6",key:"svg-0"}]]),K=k("chevron-right","IconChevronRight",[["path",{d:"M9 6l6 6l-6 6",key:"svg-0"}]]),Q=k("chevron-up","IconChevronUp",[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]]),W=k("edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]),X=k("plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]),Y=k("trash","IconTrash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]]);const Z={__name:"ATh",props:{column:{type:Object,required:!0},sort:{type:Object,default:()=>({})}},emits:["update:sort"],setup(t,{emit:m}){const d=m,a=t,l=I(()=>a.column.sortable),u=I(()=>l.value?a.sort.column!==a.column.field?G:a.sort.direction==="asc"?Q:H:null),o=()=>{if(l.value){if(a.sort.column!==a.column.field){d("update:sort",{column:a.column.field,direction:"asc"});return}if(a.sort.direction==="asc"){d("update:sort",{column:a.column.field,direction:"desc"});return}d("update:sort",{column:null,direction:null})}};return(n,p)=>(c(),v("th",{onClick:o,class:C({"cursor-pointer":l.value})},[(c(),B(O(u.value),{class:"icon icon-sm icon-thick"})),g(" "+b(t.column.label),1)],2))}},ee={class:"pagination m-0"},te=["onClick"],ae={__name:"APagination",props:{lastPage:Number,page:Number,loading:Boolean},emits:["update:page"],setup(t,{emit:m}){const d=m,a=t,l=I(()=>a.page===1),u=I(()=>a.page===a.lastPage),o=s=>{d("update:page",s)},n=()=>{a.page<a.lastPage&&o(a.page+1)},p=()=>{a.page>1&&o(a.page-1)};return(s,_)=>(c(),v("ul",ee,[e("li",{class:C(["page-item",{disabled:l.value||t.loading}])},[e("button",D({class:"page-link"},{zIndex:l.value?"-1":"0"},{onClick:p}),[f(i(J),{class:"icon"}),g(" prev ")],16)],2),(c(!0),v(M,null,w(t.lastPage,h=>(c(),v("li",{key:`page-${h}`,class:C([{active:t.page===h,disabled:t.loading},"page-item"])},[e("button",{class:"page-link",onClick:y=>o(h)},b(h),9,te)],2))),128)),e("li",{class:C(["page-item",{disabled:u.value||t.loading}])},[e("button",D({class:"page-link",onClick:n},{zIndex:u.value?"-1":"0"}),[g(" next "),f(i(K),{class:"icon"})],16)],2)]))}},se={class:"card"},le={class:"card-header"},oe={class:"card-title"},ne={class:"card-body border-bottom py-3"},re={class:"d-flex"},ie={class:"text-secondary"},ce={class:"mx-2 d-inline-block"},de={class:"ms-auto text-secondary"},ue={class:"ms-2 d-inline-block"},pe={class:"table-responsive"},ge={class:"table card-table table-vcenter text-nowrap datatable"},ve=e("th",{colspan:"100%",class:"p-0 border-0"},[e("div",{style:{height:"1px"},class:"progress rounded-0"},[e("div",{class:"progress-bar progress-bar-indeterminate"})])],-1),me=[ve],he={key:0,class:"card-footer d-flex align-items-center"},fe={class:"m-0 text-secondary"},ye={__name:"ATable",props:j({title:{type:String,required:!0},loading:{type:Boolean,default:!1},columns:{type:Array,default:()=>[]},sort:{type:Object,default:()=>({})},rows:{type:Array,default:()=>[]},pagination:{type:Object,default:null}},{search:{},searchModifiers:{},perPage:{},perPageModifiers:{},page:{},pageModifiers:{}}),emits:j(["update:sort","update:page"],["update:search","update:perPage","update:page"]),setup(t,{emit:m}){const d=m,a=U(t,"search"),l=U(t,"perPage"),u=U(t,"page"),o=n=>{d("update:sort",n)};return(n,p)=>(c(),v("div",se,[e("div",le,[e("h3",oe,b(t.title),1)]),e("div",ne,[e("div",re,[e("div",ie,[g(" Show "),e("div",ce,[V(e("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":p[0]||(p[0]=s=>l.value=s),size:"3","aria-label":"Invoices count"},null,512),[[z,l.value,void 0,{number:!0,lazy:!0}]])]),g(" entries ")]),e("div",de,[g(" Search: "),e("div",ue,[V(e("input",{type:"text","onUpdate:modelValue":p[1]||(p[1]=s=>a.value=s),class:"form-control form-control-sm","aria-label":"Search invoice"},null,512),[[z,a.value,void 0,{lazy:!0}]])])])])]),e("div",pe,[e("table",ge,[e("thead",null,[e("tr",null,[(c(!0),v(M,null,w(t.columns,(s,_)=>(c(),B(Z,{key:`col-${_}`,"onUpdate:sort":o,sort:t.sort,column:s},null,8,["sort","column"]))),128))]),e("tr",{class:C({invisible:!t.loading})},me,2)]),e("tbody",null,[e("tr",null,[T(n.$slots,"top-row")])]),e("tbody",null,[(c(!0),v(M,null,w(t.rows,(s,_)=>(c(),v("tr",{key:`row-${_}`},[(c(!0),v(M,null,w(t.columns,(h,y)=>(c(),v("td",{key:`row-${_}-${y}`,class:"text-truncate",style:L(h.style)},[T(n.$slots,`body-cell-${h.name}`,{value:s[h.field],row:s},()=>[g(b(s[h.field]),1)])],4))),128))]))),128))])])]),"footer"in n.$slots||t.pagination!==null?(c(),v("div",he,[e("p",fe,[g("Showing "),e("span",null,b(t.pagination.from),1),g(" to "),e("span",null,b(t.pagination.to),1),g(" of "),e("span",null,b(t.pagination.total),1),g(" entries ")]),f(ae,{class:"ms-auto",loading:t.loading,"last-page":t.pagination.lastPage,page:u.value,"onUpdate:page":p[2]||(p[2]=s=>u.value=s)},null,8,["loading","last-page","page"])])):E("",!0)]))}};function be(t){const m=P([]),d=P(""),a=P({column:void 0,direction:void 0}),l=P(!1),u=P({page:1,perPage:10,total:0,from:0,to:0,lastPage:0}),o=P({}),n=()=>{l.value=!0;const p=Object.fromEntries(Object.entries(o.value).filter(([,s])=>!!s));N.get(t,{params:{sort:a.value.column,direction:a.value.direction,page:u.value.page,per_page:u.value.perPage,search:d.value,filters:p}}).then(s=>{m.value=s.data.data,u.value={page:s.data.meta.current_page,perPage:s.data.meta.per_page,total:s.data.meta.total,from:s.data.meta.from,to:s.data.meta.to,lastPage:s.data.meta.last_page}}).finally(()=>{l.value=!1})};return R([u,d,a,o],()=>{l.value||n()},{deep:!0}),F(()=>{n()}),{pagination:u,filters:o,loading:l,data:m,search:d,sort:a,fetch:n}}const ke={class:"page-header d-print-none"},_e={class:"container-xl"},Pe={class:"row g-2 align-items-center"},$e=e("div",{class:"col"},[e("h2",{class:"page-title"}," Products ")],-1),xe={class:"col-auto ms-auto d-print-none"},Me={class:"btn-list"},Ce={class:"page-body"},we={class:"container-xl"},Ie=["onUpdate:modelValue"],Ue={class:"text-secondary"},Se={class:"d-flex justify-content-end gap-2"},De={__name:"ProductsIndex",setup(t){const m=[{name:"id",label:"ID",field:"id",sortable:!0,filterable:!0},{name:"title",label:"Title",field:"title",sortable:!0,filterable:!0},{name:"description",label:"Description",field:"description",sortable:!0,filterable:!0,style:{"max-width":"200px"}},{name:"price",label:"Price",field:"price",sortable:!0,filterable:!0},{name:"type",label:"Type",field:"type",sortable:!0,filterable:!0},{name:"actions",label:"Actions",field:"actions"}],d=P({}),{fetch:a,sort:l,data:u,pagination:o,search:n,filters:p,loading:s}=be("products"),_=y=>{confirm("Are you sure you want to delete this product?")&&(d.value[y.id]=!0,N.delete(`/products/${y.id}`).then(()=>a()).catch(()=>alert("Something went wrong!")).finally(()=>{d.value[y.id]=!1}))},h=y=>{l.value=y};return(y,$)=>(c(),v(M,null,[e("div",ke,[e("div",_e,[e("div",Pe,[$e,e("div",xe,[e("div",Me,[f(S,{variant:"primary",to:{name:"products.create"}},{default:x(()=>[f(i(X),{class:"icon"}),g(" Create product ")]),_:1},8,["to"])])])])])]),e("div",Ce,[e("div",we,[f(ye,{title:"Products","onUpdate:sort":h,perPage:i(o).perPage,"onUpdate:perPage":$[0]||($[0]=r=>i(o).perPage=r),page:i(o).page,"onUpdate:page":$[1]||($[1]=r=>i(o).page=r),search:i(n),"onUpdate:search":$[2]||($[2]=r=>q(n)?n.value=r:null),rows:i(u),sort:i(l),columns:m,pagination:i(o),loading:i(s)},{"top-row":x(()=>[(c(),v(M,null,w(m,r=>e("td",{key:`filter-row-${r.name}`,class:"p-1"},[r.filterable?V((c(),v("input",{key:0,type:"text",class:"form-control form-control-sm","onUpdate:modelValue":A=>i(p)[r.field]=A},null,8,Ie)),[[z,i(p)[r.field],void 0,{lazy:!0}]]):E("",!0)])),64))]),"body-cell-id":x(({value:r})=>[e("span",Ue,b(r),1)]),"body-cell-actions":x(({row:r})=>[e("div",Se,[f(S,{variant:"primary",to:{name:"products.edit",params:{id:r.id}}},{default:x(()=>[f(i(W),{class:"icon"}),g(" Edit ")]),_:2},1032,["to"]),f(S,{variant:"danger",onClick:A=>_(r),loading:d.value[r.id]},{default:x(()=>[f(i(Y),{class:"icon"}),g(" Delete ")]),_:2},1032,["onClick","loading"])])]),_:1},8,["perPage","page","search","rows","sort","pagination","loading"])])])],64))}};export{De as default};
